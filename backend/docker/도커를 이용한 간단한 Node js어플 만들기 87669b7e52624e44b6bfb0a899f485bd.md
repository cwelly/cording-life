# 도커를 이용한 간단한 Node.js어플 만들기

강의 번호: Docker
복습: No
작성일시: 2023년 1월 17일 오후 2:52

### 왜 alpine 이 아니라 node를 from 으로 사용할까?

alpine 이미지는 가장 최소한의 경량화된 파일들이 들어있기에 , npm을 위한 파일이 들어있지 않아서 npm install 을 설정할 수 없다.

### Package.js 와 server.js 를 이용해 이미지 생성하기

```docker
FROM node:10
// 알파인은 node.js 의 npm을 설치하기엔 너무 컴팩트하다

RUN npm install
// node.js 의 express 를 사용하기 위해 다운받는 커맨드

CMD ["node", "server.js"]
// 실제 node.js 를 실행시키기 위한 파일 설정
```

```json
{
  "name": "dockerfile-folder",
  "version": "1.0.0",
  "description": "",
  "main": "server.js",
  "scripts": {
    "start": ""

  },
  "dependencies": {
    "express": "4.17.1"
  },
  "author": "",
  "license": "ISC"
}
```

```jsx
const express = require('express');

const PORT = 8080;

//App
const app = express ();
app.get('/', (req,res)=>{
    res.send("Hello World");
});

app.listen(PORT);
```

위와 같은 상황에서 dockerfile 이미지를 빌드하게 되면 오류가 발생한다.

### package.json 파일을 못찾았습니다.

현재 위 Dockerfile 의 코드를 실행하려 컨테이너를 만들었지만 , 컨테이너 안으로 “node server.js “ 를 실행시키기 위한 설정파일인 package.json 파일을 못찾았다. 컨테이너안에는 파일들이 없기 때문이다.

그렇기 때문에 COPY 명령어를 Dockerfile 에 추가해서 컨테이너안에 package.json을 가져온다.

```docker
FROM node:10
// 알파인은 node.js 의 npm을 설치하기엔 너무 컴팩트하다

COPY ./ ./
// 도커파일과 같은 위치에 있는(/. ) 모든파일 을 컨테이너 루트경로(./)에 복사한다.

RUN npm install
// node.js 의 express 를 사용하기 위해 다운받는 커맨드

CMD ["node", "server.js"]
// 실제 node.js 를 실행시키기 위한 파일 설정
```

위의 내용으로 도커 컨테이너를 만드는 기본적인 과정과 , 

컨테이너 생성당시 파일들의 상황, 어떻게 컨테이너에 파일들을 넣어야 되는지를 자세히 배웠다.